<!DOCTYPE html>
<html lang="en">
  <head><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/dist/main.css">
<title>Play with Music with JavaScript</title></head>
  <body>
      <a href="#main" class="skip-to-main">Skip To Main Content</a>
      <header class="header">
  <img class="header__wordmark" src="/assets/images/paulooidev-wordmark.svg" alt="Paul Ooi Development" width="200" height="30" />
  <button class="header__menu-button" aria-label="site menu" aria-expanded="false" aria-controls="nav--main"><svg version="1.1" width="16" height="16" viewBox="0 0 16 16" class="octicon octicon-three-bars" aria-hidden="true"><path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path></svg><svg version="1.1" width="16" height="16" viewBox="0 0 16 16" class="octicon octicon-x" aria-hidden="true"><path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path></svg></button>
  <nav class="header__menu header__menu--main header__menu--hidden" aria-label="main navigation">
    <ul class="header__menu-list" id="nav--main"><li class="header__menu-item"><a class="header__menu-link" href="/">home</a></li><li class="header__menu-item"><a class="header__menu-link" href="/contact">contact</a></li><li class="header__menu-item"><a class="header__menu-link" href="/work">work</a></li><li class="header__menu-item"><a class="header__menu-link" href="/blog">blog</a></li></ul>
  </nav>
</header>
      <main class="main" id="main">
        <article class="content">
  <header class="section section__hero">
  <h1 class="hero__heading">Play with Music with JavaScript</h1>
  <time class="published-date" datetime="Mon Jun 08 2020 20:00:00 GMT-0400 (Eastern Daylight Saving Time)">Mon Jun 08 2020 20:00:00 GMT-0400 (Eastern Daylight Saving Time)</time>
</header>
  <p>Just for fun I am going through a series of <a rel="noreferrer noopener" href="https://www.youtube.com/watch?v=lhNdUVh3qCc" target="_blank">JavaScript games</a> and creating my own versions. For my own twist, I thought it'd be fun to add some sounds to the game, and wondered if there's a way to do it with code. Sure enough, there is. There's a Web Audio API that can be used in the browser. Mozilla has an <a rel="noreferrer noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Simple_synth" target="_blank">example synth</a> with code to get started.</p>
<p>Here's a sample of code that I've pieced together to play a scale, just to get me started. The function playTone takes in three parameters; a frequency value for the note itself, a duration to play the note and a delay period before playing the note.</p>
<pre><code class="language-js">var audioContext = new (window.AudioContext || window.webkitAudioContext)();

// Reference https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Simple_synth
function playTone(freq, time = null, delay = 0) {
    let masterGainNode = audioContext.createGain();
    masterGainNode.connect(audioContext.destination);
    masterGainNode.gain.value = 0.6;

    let type = &quot;triangle&quot;; // sine | square | sawtooth | triangle

    let osc = audioContext.createOscillator();
    osc.connect(masterGainNode);
    osc.type = type;
    osc.frequency.value = freq;

    delay = delay * 1000;
    setTimeout(function() {
        osc.start();

        if (time != null) {
            let duration = time * 1000;
            setTimeout(function() {
                osc.stop();
            }, duration);
        }
    }, delay);

    return osc;
}

// An Object of an 8 note scale
let note = {
    C5  : 523.2511306011972,
    D5  : 587.3295358348151,
    E5  : 659.2551138257398,
    F5  : 698.4564628660078,
    G5  : 783.9908719634985,
    A5  : 880,
    B5  : 987.7666025122483,
    C6  : 1046.5022612023945
};

playTone(note.C5, 1, 0);
playTone(note.D5, 1, 1);
playTone(note.E5, 1, 2);
playTone(note.F5, 1, 3);
playTone(note.G5, 1, 4);
playTone(note.A5, 1, 5);
playTone(note.B5, 1, 6);
playTone(note.C6, 1, 7);
</code></pre>
<p>This is far from creating an orchestral piece but I'm hoping to set a few notes together to play at least a chime of sorts in my game(s). Once I complete the chime, I'll update this post and place a link to the game here.</p>
</article>
<aside class="sidebar"></aside>
      </main>
      <footer class="footer">
  <nav class="footer__menu" aria-label="footer navigation">
    <ul class="footer__menu-list">
      
        <li class="footer__menu-item">
          <a class="footer__menu-link" href="/">home</a>
        </li>
      
        <li class="footer__menu-item">
          <a class="footer__menu-link" href="/contact">contact</a>
        </li>
      
        <li class="footer__menu-item">
          <a class="footer__menu-link" href="/work">work</a>
        </li>
      
        <li class="footer__menu-item">
          <a class="footer__menu-link" href="/blog">blog</a>
        </li>
      
    </ul>
  </nav>
  <small class="footer__copyright">&copy; Paul Ooi Web Development</small>
</footer>
      <script src="/dist/main.js" ></script>
  </body>
</html>