<!DOCTYPE html>
<html lang="en">
  <head><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/blog/dist/main.css">
<title>Play with Music with JavaScript</title></head>
  <body class="posts ">
      <nav class="skip-links" aria-label="Skip Links">
        <a href="#main" class="skip-to-main">Skip To Main Content</a>
      </nav>
      <header class="header">
  <a href="/blog/" class="home-logo">
    <img loading="eager" class="header__wordmark" src="/blog/assets/images/paulooidev-wordmark.svg" alt="Paul Ooi Development" width="200" height="30">
  </a>
  <button class="header__menu-button" aria-label="site menu" aria-expanded="false" aria-controls="nav--main">
    <span>MENU</span><svg version="1.1" width="16" height="16" viewBox="0 0 16 16" class="octicon octicon-three-bars" aria-hidden="true"><path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path></svg><svg version="1.1" width="16" height="16" viewBox="0 0 16 16" class="octicon octicon-x" aria-hidden="true"><path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path></svg></button>
  <nav class="header__menu header__menu--main header__menu--hidden" aria-label="main navigation">
    <ul class="header__menu-list" id="nav--main"><li class="header__menu-item"><a class="header__menu-link" href="/blog/">home</a></li><li class="header__menu-item"><a class="header__menu-link" href="/blog/contact">contact</a></li><li class="header__menu-item"><a class="header__menu-link" href="/blog/resume">resume</a></li><li class="header__menu-item"><a class="header__menu-link" href="/blog/blog">blog</a></li></ul>
  </nav>
</header>
      <main class="main" id="main">
        <article class="content">
  <header class="section section__hero">
  <h1 class="hero__heading">Play with Music with JavaScript</h1>
  <div class="pub-date">
    Published Date: <time class="published-date" datetime="Tue Jun 09 2020 00:00:00 GMT+0000 (Coordinated Universal Time)">Jun 9, 2020</time>
  </div>
  

  
</header>
  
  
  
  <p>Just for fun I am going through a series of <a rel="noreferrer noopener" href="https://www.youtube.com/watch?v=lhNdUVh3qCc" target="_blank">JavaScript games</a> and creating my own versions. For my own twist, I thought it'd be fun to add some sounds to the game, and wondered if there's a way to do it with code. Sure enough, there is. There's a Web Audio API that can be used in the browser. Mozilla has an <a rel="noreferrer noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Simple_synth" target="_blank">example synth</a> with code to get started.</p>
<p>Here's a sample of code that I've pieced together to play a scale, just to get me started. The function playTone takes in three parameters; a frequency value for the note itself, a duration to play the note and a delay period before playing the note.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> audioContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>AudioContext <span class="token operator">||</span> window<span class="token punctuation">.</span>webkitAudioContext<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Reference https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Simple_synth</span><br><span class="token keyword">function</span> <span class="token function">playTone</span><span class="token punctuation">(</span><span class="token parameter">freq<span class="token punctuation">,</span> time <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> masterGainNode <span class="token operator">=</span> audioContext<span class="token punctuation">.</span><span class="token function">createGain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    masterGainNode<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>audioContext<span class="token punctuation">.</span>destination<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    masterGainNode<span class="token punctuation">.</span>gain<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0.6</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">let</span> type <span class="token operator">=</span> <span class="token string">"triangle"</span><span class="token punctuation">;</span> <span class="token comment">// sine | square | sawtooth | triangle</span><br><br>    <span class="token keyword">let</span> osc <span class="token operator">=</span> audioContext<span class="token punctuation">.</span><span class="token function">createOscillator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    osc<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>masterGainNode<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    osc<span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span><br>    osc<span class="token punctuation">.</span>frequency<span class="token punctuation">.</span>value <span class="token operator">=</span> freq<span class="token punctuation">;</span><br><br>    delay <span class="token operator">=</span> delay <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span><br>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        osc<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">let</span> duration <span class="token operator">=</span> time <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span><br>            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                osc<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><span class="token punctuation">,</span> duration<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> osc<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// An Object of an 8 note scale</span><br><span class="token keyword">let</span> note <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token constant">C5</span>  <span class="token operator">:</span> <span class="token number">523.2511306011972</span><span class="token punctuation">,</span><br>    <span class="token constant">D5</span>  <span class="token operator">:</span> <span class="token number">587.3295358348151</span><span class="token punctuation">,</span><br>    <span class="token constant">E5</span>  <span class="token operator">:</span> <span class="token number">659.2551138257398</span><span class="token punctuation">,</span><br>    <span class="token constant">F5</span>  <span class="token operator">:</span> <span class="token number">698.4564628660078</span><span class="token punctuation">,</span><br>    <span class="token constant">G5</span>  <span class="token operator">:</span> <span class="token number">783.9908719634985</span><span class="token punctuation">,</span><br>    <span class="token constant">A5</span>  <span class="token operator">:</span> <span class="token number">880</span><span class="token punctuation">,</span><br>    <span class="token constant">B5</span>  <span class="token operator">:</span> <span class="token number">987.7666025122483</span><span class="token punctuation">,</span><br>    <span class="token constant">C6</span>  <span class="token operator">:</span> <span class="token number">1046.5022612023945</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token function">playTone</span><span class="token punctuation">(</span>note<span class="token punctuation">.</span><span class="token constant">C5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">playTone</span><span class="token punctuation">(</span>note<span class="token punctuation">.</span><span class="token constant">D5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">playTone</span><span class="token punctuation">(</span>note<span class="token punctuation">.</span><span class="token constant">E5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">playTone</span><span class="token punctuation">(</span>note<span class="token punctuation">.</span><span class="token constant">F5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">playTone</span><span class="token punctuation">(</span>note<span class="token punctuation">.</span><span class="token constant">G5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">playTone</span><span class="token punctuation">(</span>note<span class="token punctuation">.</span><span class="token constant">A5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">playTone</span><span class="token punctuation">(</span>note<span class="token punctuation">.</span><span class="token constant">B5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">playTone</span><span class="token punctuation">(</span>note<span class="token punctuation">.</span><span class="token constant">C6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>This is far from creating an orchestral piece but I'm hoping to set a few notes together to play at least a chime of sorts in my game(s). Once I complete the chime, I'll update this post and place a link to the game here.</p>
</article>

      </main>
      <footer class="footer">
  <nav class="footer__menu" aria-label="footer navigation">
    <ul class="footer__menu-list">
      
        <li class="footer__menu-item">
          <a class="footer__menu-link" href="/blog/">home</a>
        </li>
      
        <li class="footer__menu-item">
          <a class="footer__menu-link" href="/blog/contact">contact</a>
        </li>
      
        <li class="footer__menu-item">
          <a class="footer__menu-link" href="/blog/resume">resume</a>
        </li>
      
        <li class="footer__menu-item">
          <a class="footer__menu-link" href="/blog/blog">blog</a>
        </li>
      
    </ul>
  </nav>
  <small class="footer__copyright">&copy; Paul Ooi Web Development</small>
</footer>
      <script src="/blog/dist/main.js"></script>
  </body>
</html>